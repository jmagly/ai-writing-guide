# Option Matrix: AIWG Package Distribution

## Decision 1: Package Manager Selection

| Option | Reach | Effort | Maintenance | Decision |
|--------|-------|--------|-------------|----------|
| **npm only** | High (JS/Node devs) | Low | Low | **SELECTED** |
| npm + Homebrew | Higher (macOS native) | Medium | Medium | Future |
| npm + brew + apt | Highest | High | High | Future |

**Rationale**: npm provides immediate access to the largest developer audience with minimal effort. Node.js is already a requirement. Alternative registries (GitHub Packages, Verdaccio) can be added later without architectural changes.

---

## Decision 2: Versioning Strategy

| Option | Predictability | Complexity | Communication | Decision |
|--------|----------------|------------|---------------|----------|
| SemVer (MAJOR.MINOR.PATCH) | High | Medium | "Breaking changes" | — |
| **CalVer (YYYY.MM.PATCH)** | High | Low | "Released Dec 2024" | **SELECTED** |
| SemVer + prereleases | Medium | High | Alpha/beta confusion | — |

**Rationale**: CalVer is simpler for a framework that evolves continuously without strict API boundaries. Users immediately know the release age. Format: `2024.12.0`, `2024.12.1`, etc.

---

## Decision 3: Bleeding Edge Implementation

| Option | User Experience | Implementation | Isolation | Decision |
|--------|-----------------|----------------|-----------|----------|
| **Post-install flag** | `aiwg --use-main` | Medium | High | **SELECTED** |
| Separate package | Install `aiwg-edge` | High (2 packages) | Complete | — |
| Environment variable | `AIWG_CHANNEL=edge` | Low | Medium | — |
| Keep install.sh only | Document as "power user" | None | Complete | — |

**Rationale**: Post-install flag keeps a single package while providing clear channel switching. User explicitly opts in to edge mode. Easy to switch back with `--use-stable`.

---

## Decision 4: Bundle Strategy

| Option | Package Size | First Run | Offline Use | Decision |
|--------|--------------|-----------|-------------|----------|
| **Full bundle** | ~10-15MB | Instant | Full support | **SELECTED** |
| Fetch on demand | ~1MB | Network required | Limited | — |
| Core + optional | ~3MB | Partial | Core only | — |

**Rationale**: Full bundle ensures consistent experience across all environments. Modern npm handles larger packages well. Eliminates network dependency after install.

---

## Decision 5: Update Mechanism

| Option | User Control | Friction | Freshness | Decision |
|--------|--------------|----------|-----------|----------|
| Manual npm update | Full | High | User-driven | — |
| Update notifications | Full | Low | Awareness | — |
| **Auto-update prompt** | Full (confirms) | Medium | High | **SELECTED** |

**Rationale**: Prompt on new version balances user control with keeping installations current. User always confirms before update. Non-blocking background check.

---

## Decision 6: Release Automation

| Option | Speed | Safety | Effort | Decision |
|--------|-------|--------|--------|----------|
| Manual releases | Slow | High (review) | High | — |
| **Tag-triggered** | Fast | Medium | Low | **SELECTED** |
| PR-based | Fast | High | Medium | Future |

**Rationale**: Tag-triggered is the npm ecosystem standard. Push `v2024.12.0` tag → automatic publish. Simple, well-understood workflow.

---

## Decision 7: Security Level

| Option | Trust | Complexity | Adoption | Decision |
|--------|-------|------------|----------|----------|
| Standard npm practices | Medium | Low | Wide | — |
| **Signed releases** | High | Medium | Enterprise-ready | **SELECTED** |
| Minimal | Low | None | Limited | — |

**Rationale**: GPG-signed releases with npm provenance attestation enables enterprise adoption and provides supply chain security. GitHub Actions OIDC makes this low-effort.

---

## Summary of Selected Options

| Decision Area | Selected Option |
|---------------|-----------------|
| Package Manager | npm only (v1.0) |
| Versioning | CalVer (YYYY.MM.PATCH) |
| Bleeding Edge | Post-install `--use-main` flag |
| Bundle Strategy | Full bundle (~10-15MB) |
| Update Mechanism | Auto-update prompt (user confirms) |
| Release Automation | Tag-triggered CI/CD |
| Security | Signed releases + provenance |

---

## Future Considerations

### Phase 2 (Post v1.0)
- Homebrew formula for macOS users
- Alternative npm registries (GitHub Packages)
- PR-based release workflow with auto-changelog

### Phase 3 (If Demand)
- apt/deb packages for Linux
- Windows-specific installer
- Docker image distribution

---

*Generated by AIWG intake-wizard on 2024-12-09*
